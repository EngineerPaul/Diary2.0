Работа:
1. При первом запуске необходимо отключить другие проекты, а именно нужно освободить порты 80
2. Сделать все скрипты исполняемыми: chmod +x *.sh
3. запускаем ./scripts/setup-ssl.sh
4. можно проверить получение ssl, например: ./scripts/check-expiry.sh или ./scripts/get-days-left.sh
5. ssl должны быть сохранены снаружи в папке ./nginx/ssl (снаружи ssl-factory!)
    Важно: место сохранения ключей указано в ssl-compose.yaml в томах.
6. Ключи выдаются на 90 дней. Для автоматического обновления необходимо запустить cron задачу:

7. SSL ключи должны быть получены и сохранены в ./nginx/ssl. Для дальнейшей работы необходимо переключить приложение на работу с HTTPS.

Crontab (cron table - файл автоматического выполнения задач во всех Unix системах):
1. Проверим работу: sudo systemctl status cron
2. Создание задачи:
    a. Открываем редактор cron: crontab -e
    b. Выбираем редактор (если первый раз): Choose 1-4 [1]: 1 (/bin/nano)
    c. добавляем строку: 0 3 * * * cd /path/to/your/project/ssl-factory && ./scripts/renew-ssl.sh >> /var/log/ssl-renewal.log 2>&1
    d. сохраняем, выходим: Ctrl+X → Y → Enter (nano)
3. Проверка списка задач: crontab -l

Docekr-compose (ssl-compose):
* CERTBOT:
    Сервис создает контейнер и пытается получить SSL сертификаты.
    Особенности: 
    - необходимо указать DOMAIN и EMAIL для получения ключей, а также режим CERTBOT_MODE (staging или production)
    - staging выдает тестовые ключи, а production - реальные. production можно запрашивать 5 раз в час
    - сертификаты сохраняются в папку ./nginx/ssl на хосте
    - запускается после nginx сервиса, потому что нужен рабочий порт 80 для let's encrypt верификации домена
    - получает окружение через файл ./certbot/.env, а не секреты. AI сказал, что там не особо секретная информация.
* NGINX:
    Сервис открывает 80 порт для прохождения проверки Let's Encrypt
    Особенности: 
    - имею упрощенную конфигурацию только для Let's Encrypt верификации домена
    - nginx использует сертификаты из папки ./nginx/ssl на хосте (хотя они ему и не нужны на порте 80)


Основные скрипты:
- setup-ssl.sh - первый запуск. Получение первых SSL. Используется один раз. Сохраняет ключи в ./nginx/ssl.
- renew-ssl.sh - обновление SSL сертификатов. Используется периодически в cron.
Примечение: renew-ssl.sh должен запускаться периодически (например, раз в месяц). Для этого подойдет cron.
cron команда для ежедневной проверки: 0 3 * * * cd /var/www/Diary-project/Diary2.0/ssl-factory && ./scripts/renew-ssl.sh >> /var/log/ssl-renewal.log 2>&1

Всмопомгательные скрипты (не используются автоматически, нужны для ручного управления):
- backup-ssl.sh - резервное копирование SSL сертификатов
- check-ssl.sh - проверка валидности SSL сертификатов
- get-days-left.sh - получение количества дней до истечения SSL сертификатов

